#!/bin/sh
set -e

echo "ğŸš€ Running pre-commit checks (fast local validation)..."

# 1. Run linting and type checking (fast)
echo "ğŸ“ Running linting..."
npm run lint

echo "ğŸ” Running type checking..."
npm run check

# 2. Run unit tests only (fast)
echo "ğŸ§ª Running unit tests..."
npm test

# 3. Security audit (high severity only)
echo "ğŸ”’ Running security audit..."
npm audit --audit-level=high || {
  echo "âš ï¸  High severity security vulnerabilities found!"
  echo "Run 'npm audit' for details or 'npm audit fix' to fix automatically"
  exit 1
}

echo "âœ… Pre-commit checks passed! (Docker validation and deployment tests run in CI)"